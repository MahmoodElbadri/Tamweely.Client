<div class="container py-4">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-5">
    <div>
      <h1 class="mb-2">Address Book</h1>
    </div>
    <a
      [routerLink]="['/address-book/address-form']"
      class="btn btn-outline-primary"
    >
      <span class="me-2">â•</span> Add New
    </a>
  </div>

  <div class="row g-4">
    @if(addresses && addresses.length > 0) { @for(ad of addresses; track ad.id)
    {
    <div class="col-md-6 col-lg-4">
      <div class="card h-100">
        <!-- Card Header with Photo -->
        <div class="card-header d-flex align-items-center gap-3 p-4">
          <div
            class="overflow-hidden rounded-circle"
            style="width: 60px; height: 60px"
          >
            <img
              [src]="
                ad.photoPath
                  ? imageUrl + ad.photoPath
                  : 'https://placehold.co/60x60'
              "
              alt="{{ ad.fullname }}"
              class="img-fluid"
              onerror="this.src='https://placehold.co/60x60'"
            />
          </div>
          <div class="flex-grow-1">
            <h4 class="card-title mb-1">{{ ad.fullname }}</h4>
            <p class="card-text text-muted small">{{ ad.jobTitleName }}</p>
          </div>
        </div>

        <!-- Card Body -->
        <div class="card-body p-4">
          <!-- Age in body -->
          <div class="d-flex align-items-center gap-2 mb-3">
            <span class="text-primary">ğŸ‚</span>
            <span class="text-muted">Age: {{ ad.age }}</span>
          </div>

          <!-- Contact Info -->
          <div class="mb-3">
            <div class="d-flex align-items-center gap-2 mb-2">
              <span class="text-primary">ğŸ“±</span>
              <a
                [href]="'tel:' + ad.mobileNumber"
                class="text-decoration-none text-primary"
                >{{ ad.mobileNumber }}</a
              >
            </div>

            <div class="d-flex align-items-center gap-2 mb-2">
              <span class="text-primary">ğŸ“§</span>
              <a
                [href]="'mailto:' + ad.email"
                class="text-decoration-none text-primary text-truncate"
                >{{ ad.email }}</a
              >
            </div>

            <div class="d-flex align-items-center gap-2">
              <span class="text-primary">ğŸ </span>
              <span class="text-muted">{{ ad.address }}</span>
            </div>

            <div class="d-flex align-items-center gap-2 mt-2">
              <span class="text-primary">ğŸ“…</span>
              <span class="text-muted">{{
                ad.dateOfBirth | date : "mediumDate"
              }}</span>
            </div>
          </div>

          <!-- Department Badge -->
          <div class="mt-3 pt-3 border-top">
            <span class="badge bg-primary">{{ ad.departmentName }}</span>
          </div>
        </div>

        <!-- Card Footer with Actions -->
        <div class="card-footer p-3 d-flex gap-2">
          <a [routerLink]="['address-form', ad.id]" class="btn btn-sm btn-outline-primary flex-grow-1">
            <span class="me-1">âœï¸</span> Edit
          </a>
          <button (click)="onDelete(ad.id)" class="btn btn-sm btn-outline-danger flex-grow-1">
            <span class="me-1">ğŸ—‘ï¸</span> Delete
          </button>
        </div>
      </div>
    </div>
    } } @else {
    <!-- Empty State -->
    <div class="col-12">
      <div class="card text-center py-5">
        <div class="mb-4">
          <span class="h1 text-muted">ğŸ“‡</span>
        </div>
        <h3 class="mb-3">No Addresses Found</h3>
        <p class="text-muted mb-4">Your address book is empty</p>
        <a
          [routerLink]="['/address-book/address-form']"
          class="btn btn-primary"
        >
          <span class="me-2">â•</span> Add First Address
        </a>
      </div>
    </div>
    }
  </div>
</div>
